{"version":3,"sources":["webpack:///src/base/slider.vue","webpack:///./src/base/slider.vue?4c6d","webpack:///./src/base/slider.vue","webpack:///src/components/recommend/recommend.vue","webpack:///./src/api/recommend.js","webpack:///./src/components/recommend/recommend.vue?f84c","webpack:///./src/components/recommend/recommend.vue","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./node_modules/core-js/library/fn/json/stringify.js"],"names":["slider","props","imageList","Array","loop","type","Boolean","default","autoPlay","interval","Number","speed","showDots","threshold","data","name","scroll","timer","pageNum","methods","initSliderSize","clientwidth","document","body","clientWidth","undefined","this","$refs","style","width","length","lis","wrapper_inner","children","i","onEnter","clearTimeout","initBScroll","_this2","$nextTick","bscroll_esm","wrapper","scrollX","scrollY","click","momentum","snap","on","_play","_this3","getCurrentPage","pageX","setTimeout","next","resizeFrame","_this4","refresh","created","_this5","mounted","window","addEventListener","destroyed","removeEventListener","console","log","beforeDestroy","disable","base_slider","render","_vm","_h","$createElement","_c","_self","ref","staticClass","mouseenter","touchstart","mouseleave","_t","_v","_l","item","index","key","class","current","_e","staticRenderFns","src_base_slider","__webpack_require__","normalizeComponent","ssrContext","recommend","mixins","mixin","hotSongList","loadOK","isloading","watch","val","old","computed","hostSongListLength","_getRecommend","_getRecommendList","extends_default","Object","vuex_esm","setDisc","imageLoad","assign_default","config","sin","ein","sortId","categoryId","rnd","Math","random","format","promise_default","a","resolve","reject","axios_default","get","params","then","response","catch","error","res","list","err","dat","_this","stringify_default","focus","module","method","param","callback","jsonp","code","content","handlePlayList","recommendPage","bottom","getHotSong","$router","push","path","dissid","components","base_scroll","loading","imageloading","recommend_recommend","attrs","listLength","content-height","directives","rawName","value","pic_info","expression","load","$event","stopPropagation","preventDefault","_s","creator","dissname","recommend_Component","recommend_normalizeComponent","__webpack_exports__","exports","__esModule","core","$JSON","JSON","stringify","it","apply","arguments"],"mappings":"wSAoBAA,GACAC,OACAC,UAAAC,MACAC,MACAC,KAAAC,QACAC,SAAA,GAEAC,UACAH,KAAAC,QACAC,SAAA,GAEAE,UACAJ,KAAAK,OACAH,QAAA,MAEAI,OACAN,KAAAK,OACAH,QAAA,KAEAK,UACAP,KAAAC,QACAC,SAAA,GAEAM,WACAR,KAAAK,OACAH,QAAA,KAGAO,KA5BA,WA6BA,OACAC,KAAA,SACAC,OAAA,KACAC,MAAA,KACAC,QAAA,IAGAC,SACAC,eADA,WAEA,IAAAC,EAAAC,SAAAC,KAAAC,YACA,QAAAC,IAAAC,KAAAC,MAAA,eACA,OAAAD,KAAAC,MAAA,eACAD,KAAAC,MAAA,cAAAC,MAAAC,MAAAR,GAAAK,KAAAxB,UAAA4B,OAAA,QAEA,IADA,IAAAC,EAAAL,KAAAC,MAAAK,cAAAC,SACAC,EAAA,EAAAA,EAAAH,EAAAD,OAAAI,IACAH,EAAAG,GAAAN,MAAAC,MAAAR,EAAA,OAIAc,QAZA,WAaA,OAAAT,KAAAT,QACAmB,aAAAV,KAAAT,OACAS,KAAAT,MAAA,OAGAoB,YAlBA,WAkBA,IAAAC,EAAAZ,KACAA,KAAAa,UAAA,WACAD,EAAAtB,OAAA,IAAAwB,EAAA,EAAAF,EAAAX,MAAAc,SACAC,SAAA,EACAC,SAAA,EACAC,OAAA,EACAC,UAAA,EACAC,MACA1C,KAAAkC,EAAAlC,KACAS,UAAAyB,EAAAzB,UACAF,MAAA2B,EAAA3B,SAGA2B,EAAAtB,OAAA+B,GAAA,YAAAT,EAAAU,OACAV,EAAAtB,OAAA+B,GAAA,WAAAT,EAAAU,UAGAA,MAnCA,WAmCA,IAAAC,EAAAvB,KACA,OAAAA,KAAAT,OACAmB,aAAAV,KAAAT,OAEAS,KAAAV,SACAU,KAAAR,QAAAQ,KAAAV,OAAAkC,iBAAAC,OAEAzB,KAAAT,MAAAmC,WAAA,WACAH,EAAAjC,OAAAqC,QACA3B,KAAAjB,WAEA6C,YA9CA,WA8CA,IAAAC,EAAA7B,KACA0B,WAAA,WACAG,EAAAnC,iBACAmC,EAAAvC,QACAuC,EAAAvC,OAAAwC,UAEAD,EAAA/C,UACA+C,EAAAP,SAEA,MAGAS,QA9FA,WA8FA,IAAAC,EAAAhC,KACAA,KAAAa,UAAA,WACAmB,EAAAtC,iBACAsC,EAAArB,cACAqB,EAAAlD,UACAkD,EAAAV,WAKAW,QAxGA,WA0GAC,OAAAC,iBAAA,SADAnC,KACA4B,aAAA,IAEAQ,UA5GA,WA6GAF,OAAAG,oBAAA,oBACAC,QAAAC,IAAA,0BAGAC,cAjHA,WAkHAxC,KAAAV,OAAAmD,UACA/B,aAAAV,KAAAT,OACAS,KAAAT,MAAA,OCrIAmD,GADiBC,OAFjB,WAA0B,IAAAC,EAAA5C,KAAa6C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,UAAAC,YAAA,kBAA0CH,EAAA,MAAWE,IAAA,gBAAAC,YAAA,cAAA7B,IAAkD8B,WAAAP,EAAAnC,QAAA2C,WAAAR,EAAAnC,QAAA4C,WAAAT,EAAAtB,SAA0EsB,EAAAU,GAAA,eAAAV,EAAAW,GAAA,KAAAvD,KAAA,SAAA+C,EAAA,OAA8DG,YAAA,QAAmBN,EAAAY,GAAAZ,EAAA,mBAAAa,EAAAC,GAA6C,OAAAX,EAAA,QAAkBY,IAAAD,EAAAE,QAAkBC,QAAAH,GAAAd,EAAApD,SAA6B,YAAYoD,EAAAkB,QAErdC,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,CACA5F,EACAoE,GATA,EAVA,SAAAyB,GACAF,EAAA,SAaA,kBAEA,MAUA,wDCqBAG,GACAC,QAAAC,EAAA,GACAlF,KAFA,WAGA,OACAC,KAAA,YACAb,aACA+F,eACAC,QAAA,EACAC,WAAA,IAGAC,OAIAF,OAJA,SAIAG,EAAAC,GACAD,GACA3E,KAAAC,MAAAX,OAAAwC,WAGAyC,YATA,SASAI,EAAAC,GACA5E,KAAAyE,WAAAE,EAAAvE,SAGAyE,UACAC,mBADA,WAEA,OAAA9E,KAAAuE,YAAAnE,SAGA2B,QA7BA,WA8BA/B,KAAA+E,gBACA/E,KAAAgF,qBAEAvF,QAAAwF,OACAC,OAAAC,EAAA,EAAAD,EACAE,QAAA,qBAEAC,UAJA,WAKArF,KAAAwE,QAAA,GAEAQ,kBAPA,WAOA,IC1EM5F,ED0ENwB,EAAAZ,MC1EMZ,EAAOkG,OAAkBC,EAAA,GAC3BC,IAAK,EACLC,IAAK,GACLC,OAAQ,EACRC,WAAY,IACZC,IAAKC,KAAKC,SACVC,OAAQ,SAGH,IAAAC,EAAAC,EAAY,SAAUC,EAASC,GACpCC,EAAAH,EAAMI,IAAI,mDACRC,OAAQlH,IACPmH,KAAK,SAAUC,GAChBN,EAAQM,KACPC,MAAM,SAAUC,GACjBP,EAAOO,QD4DbH,KAAA,SAAAI,GACA/F,EAAA2D,YAAAoC,EAAAvH,UAAAwH,MACA,SAAAC,GACAvE,QAAAC,IAAAsE,MAGA9B,cAdA,WAeA,IC3FM+B,EAIA1H,EDuFN2H,EAAA/G,MC3FM8G,EAAME,KACRC,OAASC,OAAQ,0BAA2BC,OAAQ,WAAYC,YAG9DhI,EAAOkG,OAAkBC,EAAA,GAAanG,QAAS0H,EAAOO,SAAU,YAC7DnC,OAAAoC,EAAA,EAAApC,CAFK,wCAEM9F,EAAMmG,EAAA,IDuF1BgB,KAAA,SAAAI,GACAA,EAAAY,OAAAhC,EAAA,GACAoB,EAAAM,QACAF,EAAAvI,UAAAmI,EAAAM,MAAA7H,KAAAoI,UAGA,SAAAX,GACAvE,QAAAC,IAAAsE,MAGAY,eA1BA,SA0BAb,GACAA,EAAAxG,OAAA,IACAJ,KAAAC,MAAAyH,cAAAxH,MAAAyH,OAAA,OACA3H,KAAAC,MAAAX,OAAAwC,YAGA8F,WAhCA,SAgCAnE,GACAzD,KAAAoF,QAAA3B,GACAzD,KAAA6H,QAAAC,MAAAC,KAAA,cAAAtE,EAAAuE,YAGAC,YACA3J,OAAA0F,EACA1E,OAAA4I,EAAA,EACAC,QAAAC,EAAA,IErHAC,GADiB1F,OAFjB,WAA0B,IAAAC,EAAA5C,KAAa6C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,gBAAAC,YAAA,mBAAiDH,EAAA,UAAeE,IAAA,SAAAC,YAAA,UAAAoF,OAA0CC,WAAA3F,EAAA2B,YAAAnE,UAAqC2C,EAAA,OAAYa,QAAQ4E,iBAAA5F,EAAA6B,WAAiC,aAAa1B,EAAA,OAAYG,YAAA,gBAA0BlD,KAAAxB,UAAA4B,OAAA,EAAA2C,EAAA,UAA2CuF,OAAO9J,UAAAoE,EAAApE,YAA2BoE,EAAAY,GAAAZ,EAAA,mBAAAa,EAAAC,GAA6C,OAAAX,EAAA,MAAgBY,IAAAD,EAAAR,YAAA,cAAkCH,EAAA,OAAY0F,aAAapJ,KAAA,OAAAqJ,QAAA,SAAAC,MAAAlF,EAAAmF,SAAA,IAAAC,WAAA,sBAAsF3F,YAAA,wBAAA7B,IAA0CyH,KAAAlG,EAAAyC,kBAA0BzC,EAAAkB,MAAA,GAAAlB,EAAAW,GAAA,KAAAR,EAAA,OAAsCG,YAAA,aAAuBH,EAAA,OAAYG,YAAA,cAAwBN,EAAAW,GAAA,YAAAX,EAAAW,GAAA,KAAAX,EAAAY,GAAAZ,EAAA,qBAAAa,EAAAC,GAA+E,OAAAX,EAAA,OAAiBY,IAAAD,EAAAR,YAAA,aAAA7B,IAAuCH,MAAA,SAAA6H,GAAyBA,EAAAC,kBAAyBD,EAAAE,iBAAwBrG,EAAAgF,WAAAnE,OAAuBV,EAAA,OAAYG,YAAA,aAAuBH,EAAA,OAAYG,YAAA,cAAwBH,EAAA,OAAY0F,aAAapJ,KAAA,OAAAqJ,QAAA,SAAAC,MAAAlF,EAAA,OAAAoF,WAAA,oBAA4EjG,EAAAW,GAAA,KAAAR,EAAA,OAA0BG,YAAA,gBAA0BH,EAAA,OAAYG,YAAA,kBAA4BN,EAAAW,GAAAX,EAAAsG,GAAAzF,EAAA0F,QAAA9J,SAAAuD,EAAAW,GAAA,KAAAR,EAAA,OAA4DG,YAAA,iBAA2BN,EAAAW,GAAAX,EAAAsG,GAAAzF,EAAA2F,sBAAwC,GAAAxG,EAAAW,GAAA,KAAAR,EAAA,OAA4B0F,aAAapJ,KAAA,OAAAqJ,QAAA,SAAAC,MAAA,GAAA/F,EAAA2B,YAAAnE,OAAAyI,WAAA,4BAAsG3F,YAAA,YAAwBH,EAAA,WAAgBG,YAAA,mBAA4B,OAAAN,EAAAW,GAAA,KAAAR,EAAA,oBAEllDgB,oBCCjB,IAcAsF,EAdApF,EAAA,OAcAqF,CACAlF,EACAiE,GATA,EAVA,SAAAlE,GACAF,EAAA,SAaA,kBAEA,MAUAsF,EAAA,QAAAF,EAAA,8BC1BAnC,EAAAsC,SAAkB3K,QAAAoF,EAAA,QAAAwF,YAAA,yBCAlB,IAAAC,EAAAzF,EAAA,QACA0F,EAAAD,EAAAE,OAAAF,EAAAE,MAAuCC,UAAAD,KAAAC,YACvC3C,EAAAsC,QAAA,SAAAM,GACA,OAAAH,EAAAE,UAAAE,MAAAJ,EAAAK","file":"static/js/1.0276a933c2b894926ffd.js","sourcesContent":["<template>\r\n  <div ref='wrapper' class='wrapper-frame'>\r\n    <ul ref='wrapper_inner' class='inner-frame'\r\n      v-on:mouseenter=\"onEnter\"\r\n      v-on:touchstart=\"onEnter\"\r\n      v-on:mouseleave=\"_play\">\r\n      <slot></slot>\r\n    </ul>\r\n    <div v-if=\"this.showDots\" class='dots'>\r\n      <span v-for=\"(item, index) in imageList\"\r\n       :key=\"index\"\r\n       :class=\"[{current:index == pageNum},  'dot']\">\r\n      </span>\r\n    </div>\r\n    <!-- you can put some other DOMs here, it won't affect the scrolling -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from 'better-scroll'\r\nexport default {\r\n  props: {\r\n    imageList: Array,\r\n    loop: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    autoPlay: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 3500\r\n    },\r\n    speed: {\r\n      type: Number,\r\n      default: 400\r\n    },\r\n    showDots: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    threshold: {\r\n      type: Number,\r\n      default: 0.3\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      name: 'slider',\r\n      scroll: null,\r\n      timer: null,\r\n      pageNum: 0\r\n    }\r\n  },\r\n  methods: {\r\n    initSliderSize() {\r\n      let clientwidth = document.body.clientWidth// this.$refs['wrapper'].clientWidth\r\n      if (this.$refs['wrapper_inner'] !== undefined &&\r\n          this.$refs['wrapper_inner'] !== null) {\r\n        this.$refs['wrapper_inner'].style.width = clientwidth * (this.imageList.length + 2) + 'px'\r\n        let lis = this.$refs.wrapper_inner.children\r\n        for (var i = 0; i < lis.length; i++) {\r\n          lis[i].style.width = clientwidth + 'px'\r\n        }\r\n      }\r\n    },\r\n    onEnter() {\r\n      if (this.timer !== null) {\r\n        clearTimeout(this.timer)\r\n        this.timer = null\r\n      }\r\n    },\r\n    initBScroll() {\r\n      this.$nextTick(() => {\r\n        this.scroll = new BScroll(this.$refs.wrapper, {\r\n          scrollX: true,\r\n          scrollY: false,\r\n          click: true,\r\n          momentum: false,\r\n          snap: {\r\n            loop: this.loop,\r\n            threshold: this.threshold,\r\n            speed: this.speed\r\n          }\r\n        })\r\n        this.scroll.on('scrollEnd', this._play)\r\n        this.scroll.on('touchEnd', this._play)\r\n      })\r\n    },\r\n    _play() {\r\n      if (this.timer !== null) {\r\n        clearTimeout(this.timer)\r\n      }\r\n      if (this.scroll) {\r\n        this.pageNum = this.scroll.getCurrentPage().pageX\r\n      }\r\n      this.timer = setTimeout(() => {\r\n        this.scroll.next()\r\n      }, this.interval)\r\n    },\r\n    resizeFrame() {\r\n      setTimeout(() => {\r\n        this.initSliderSize()\r\n        if (this.scroll) {\r\n          this.scroll.refresh()\r\n        }\r\n        if (this.autoPlay) {\r\n          this._play()\r\n        }\r\n      }, 20)\r\n    }\r\n  },\r\n  created() {\r\n    this.$nextTick(() => {\r\n      this.initSliderSize()\r\n      this.initBScroll()\r\n      if (this.autoPlay) {\r\n        this._play()\r\n      }\r\n    })\r\n  },\r\n\r\n  mounted() {\r\n    let _this = this\r\n    window.addEventListener('resize', _this.resizeFrame, false)\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener('resize', function() {\r\n      console.log('remove resize event')\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.scroll.disable()\r\n    clearTimeout(this.timer)\r\n    this.timer = null\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.wrapper-frame\r\n  position relative\r\n.inner-frame\r\n  height:100%\r\n  overflow hidden\r\n  &:after\r\n    content:''\r\n    display block\r\n    clear both\r\n  li\r\n    float left\r\n    img\r\n      width: 100%\r\n      height: 100%\r\n.dots\r\n  position absolute\r\n  display flex\r\n  justify-content center\r\n  left:0\r\n  right:0\r\n  bottom: 20px\r\n  width:100%\r\n  height: 10px\r\n  z-index 2\r\n  .dot\r\n    width: 10px\r\n    height: 10px\r\n    margin-left: 2px\r\n    margin-right: 2px\r\n    border-radius 10px\r\n    background-color rgba(255,255,255,0.5)\r\n  .current\r\n    width: 30px !important\r\n    background-color rgba(255,255,255,0.8) !important\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/slider.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",staticClass:\"wrapper-frame\"},[_c('ul',{ref:\"wrapper_inner\",staticClass:\"inner-frame\",on:{\"mouseenter\":_vm.onEnter,\"touchstart\":_vm.onEnter,\"mouseleave\":_vm._play}},[_vm._t(\"default\")],2),_vm._v(\" \"),(this.showDots)?_c('div',{staticClass:\"dots\"},_vm._l((_vm.imageList),function(item,index){return _c('span',{key:index,class:[{current:index == _vm.pageNum},  'dot']})})):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c1f1876\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/slider.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c1f1876\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./slider.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./slider.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./slider.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c1f1876\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./slider.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5c1f1876\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/slider.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class='recommend-page' ref=\"recommendPage\">\r\n    <scroll :listLength=\"hotSongList.length\" ref=\"scroll\" class='wrapper'>\r\n      <div :class=\"[{'content-height': isloading }, 'content']\">\r\n        <div class='music-frame'>\r\n          <slider v-if=\"this.imageList.length > 0\" :imageList=\"imageList\">\r\n            <li v-for=\"(item, index) in imageList\" :key=\"index\" class='list-item'>\r\n              <img v-lazy=\"item.pic_info.url\"\r\n                  class='slider-img needsclick'\r\n                  @load=\"imageLoad\">\r\n            </li>\r\n          </slider>\r\n        </div>\r\n        <div class='hot-song'>\r\n          <div class='hot-title'>热门歌曲推荐</div>\r\n          <div class='hot-detail'\r\n            v-for=\"(item, index) in hotSongList\"\r\n            :key=\"index\"\r\n            @click.stop.prevent=\"getHotSong(item)\">\r\n            <div class='hot-list'>\r\n              <div class='hot-image'>\r\n                <img v-lazy=\"item.imgurl\">\r\n              </div>\r\n              <div class='list-detail'>\r\n                <div class='hotlist-title'>{{item.creator.name}}</div>\r\n                <div class='hotlist-info'>{{item.dissname}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class='loading' v-show=\"hotSongList.length == 0\">\r\n          <loading class='loading-inner'></loading>\r\n        </div>\r\n      </div>\r\n    </scroll>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getRecommend, getRecommendList} from '@/api/recommend.js'\r\nimport { ERROR_OK } from '@/api/config.js'\r\nimport slider from '@/base/slider'\r\nimport scroll from '@/base/scroll'\r\nimport loading from '@/base/loading/imageloading'\r\nimport {mixin} from '@/api/mixin'\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  mixins: [mixin],\r\n  data() {\r\n    return {\r\n      name: 'recommend',\r\n      imageList: [],\r\n      hotSongList: [],\r\n      loadOK: false,\r\n      isloading: true\r\n    }\r\n  },\r\n  watch: {\r\n    // $route(to, from) {\r\n    //   // 对路由变化作出响应...\r\n    // },\r\n    loadOK(val, old) {\r\n      if (val) {\r\n        this.$refs.scroll.refresh()\r\n      }\r\n    },\r\n    hotSongList(val, old) {\r\n      this.isloading = !val.length\r\n    }\r\n  },\r\n  computed: {\r\n    hostSongListLength() {\r\n      return this.hotSongList.length\r\n    }\r\n  },\r\n  created() {\r\n    this._getRecommend()\r\n    this._getRecommendList()\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setDisc: 'SET_CURRENTDISC'\r\n    }),\r\n    imageLoad() {\r\n      this.loadOK = true\r\n    },\r\n    _getRecommendList() {\r\n      getRecommendList().then((res) => {\r\n        this.hotSongList = res.data.data.list\r\n      }, function(err) {\r\n        console.log(err)\r\n      })\r\n    },\r\n    _getRecommend() {\r\n      let _this = this\r\n      getRecommend().then(function(res) {\r\n        if (res.code === ERROR_OK) {\r\n          if (res.focus) {\r\n            _this.imageList = res.focus.data.content\r\n          }\r\n        }\r\n      }, function(err) {\r\n        console.log(err)\r\n      })\r\n    },\r\n    handlePlayList(list) {\r\n      if (list.length > 0) {\r\n        this.$refs.recommendPage.style.bottom = '60px'\r\n        this.$refs.scroll.refresh()\r\n      }\r\n    },\r\n    getHotSong(item) {\r\n      this.setDisc(item)\r\n      this.$router.push({path: `/recommend/${item.dissid}`})\r\n    }\r\n  },\r\n  components: {\r\n    slider,\r\n    scroll,\r\n    loading\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.recommend-page\r\n  position absolute\r\n  top: 88px\r\n  left 0\r\n  right 0\r\n  bottom: 0\r\n  overflow hidden\r\n  .wrapper\r\n    height 100%\r\n    overflow hidden\r\n    .content-height\r\n      height 100%\r\n    .content\r\n      display flex\r\n      flex-direction column\r\n      .music-frame\r\n        width: 100%\r\n        height: 0\r\n        padding-bottom 40%\r\n        overflow hidden\r\n      .hot-song\r\n        .hot-title\r\n          text-align: center\r\n          height: 65px\r\n          line-height 65px\r\n          width: 100%\r\n          color: #ffcd32\r\n        .hot-detail\r\n          .hot-list\r\n            display flex\r\n            justify-content: flex-start\r\n            .hot-image\r\n              box-sizing border-box\r\n              width: 80px;\r\n              height: 80px;\r\n              img\r\n                display inline-block\r\n                padding 10px\r\n                width: 60px\r\n                height: 60px\r\n            .list-detail\r\n              display: flex\r\n              font-size: 14px\r\n              flex-direction column\r\n              justify-content center\r\n              flex 1\r\n              .hotlist-title\r\n                padding: 10px\r\n              .hotlist-info\r\n                padding: 10px\r\n      .loading\r\n        position relative\r\n        flex: 1\r\n        .loading-inner\r\n          position:absolute\r\n          top: 50%\r\n          left: 50%\r\n          transform : translateY(-50%) translateX(-50%)\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/recommend/recommend.vue","import jsonp from 'common/js/jsonp'\r\nimport {commondata, options} from './config'\r\nimport axios from 'axios'\r\nexport function getRecommend() {\r\n  let dat = JSON.stringify({\r\n    focus: { module: 'QQMusic.MusichallServer', method: 'GetFocus', param: {} }\r\n  })\r\n  const url = 'https://u.y.qq.com/cgi-bin/musicu.fcg'\r\n  let data = Object.assign({}, commondata, {data: `${dat}`, callback: 'getData'})\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport function getRecommendList() {\r\n  let data = Object.assign({}, commondata, {\r\n    sin: 0,\r\n    ein: 29,\r\n    sortId: 5,\r\n    categoryId: 10000000,\r\n    rnd: Math.random(),\r\n    format: 'json'\r\n  })\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    axios.get('/apis/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg', {\r\n      params: data\r\n    }).then(function (response) {\r\n      resolve(response)\r\n    }).catch(function (error) {\r\n      reject(error)\r\n    })\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/recommend.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"recommendPage\",staticClass:\"recommend-page\"},[_c('scroll',{ref:\"scroll\",staticClass:\"wrapper\",attrs:{\"listLength\":_vm.hotSongList.length}},[_c('div',{class:[{'content-height': _vm.isloading }, 'content']},[_c('div',{staticClass:\"music-frame\"},[(this.imageList.length > 0)?_c('slider',{attrs:{\"imageList\":_vm.imageList}},_vm._l((_vm.imageList),function(item,index){return _c('li',{key:index,staticClass:\"list-item\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.pic_info.url),expression:\"item.pic_info.url\"}],staticClass:\"slider-img needsclick\",on:{\"load\":_vm.imageLoad}})])})):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"hot-song\"},[_c('div',{staticClass:\"hot-title\"},[_vm._v(\"热门歌曲推荐\")]),_vm._v(\" \"),_vm._l((_vm.hotSongList),function(item,index){return _c('div',{key:index,staticClass:\"hot-detail\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.getHotSong(item)}}},[_c('div',{staticClass:\"hot-list\"},[_c('div',{staticClass:\"hot-image\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}]})]),_vm._v(\" \"),_c('div',{staticClass:\"list-detail\"},[_c('div',{staticClass:\"hotlist-title\"},[_vm._v(_vm._s(item.creator.name))]),_vm._v(\" \"),_c('div',{staticClass:\"hotlist-info\"},[_vm._v(_vm._s(item.dissname))])])])])})],2),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hotSongList.length == 0),expression:\"hotSongList.length == 0\"}],staticClass:\"loading\"},[_c('loading',{staticClass:\"loading-inner\"})],1)])]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d388a244\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/recommend/recommend.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d388a244\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d388a244\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d388a244\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/recommend/recommend.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/json/stringify.js\n// module id = mvHQ\n// module chunks = 1","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/json/stringify.js\n// module id = qkKv\n// module chunks = 1"],"sourceRoot":""}